(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["contact"],{1463:function(t,e,i){},"159b":function(t,e,i){var n=i("da84"),a=i("fdbc"),s=i("17c2"),r=i("9112");for(var o in a){var c=n[o],d=c&&c.prototype;if(d&&d.forEach!==s)try{r(d,"forEach",s)}catch(l){d.forEach=s}}},"17c2":function(t,e,i){"use strict";var n=i("b727").forEach,a=i("a640"),s=i("ae40"),r=a("forEach"),o=s("forEach");t.exports=r&&o?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},4160:function(t,e,i){"use strict";var n=i("23e7"),a=i("17c2");n({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},"4fad":function(t,e,i){var n=i("23e7"),a=i("6f53").entries;n({target:"Object",stat:!0},{entries:function(t){return a(t)}})},"6f53":function(t,e,i){var n=i("83ab"),a=i("df75"),s=i("fc6a"),r=i("d1e7").f,o=function(t){return function(e){var i,o=s(e),c=a(o),d=c.length,l=0,u=[];while(d>l)i=c[l++],n&&!r.call(o,i)||u.push(t?[i,o[i]]:o[i]);return u}};t.exports={entries:o(!0),values:o(!1)}},"7d18":function(t,e,i){"use strict";i("96ac")},"7db0":function(t,e,i){"use strict";var n=i("23e7"),a=i("b727").find,s=i("44d2"),r=i("ae40"),o="find",c=!0,d=r(o);o in[]&&Array(1)[o]((function(){c=!1})),n({target:"Array",proto:!0,forced:c||!d},{find:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),s(o)},9099:function(t,e,i){"use strict";i("1463")},"96ac":function(t,e,i){},a640:function(t,e,i){"use strict";var n=i("d039");t.exports=function(t,e){var i=[][t];return!!i&&n((function(){i.call(null,e||function(){throw 1},1)}))}},b64b:function(t,e,i){var n=i("23e7"),a=i("7b0b"),s=i("df75"),r=i("d039"),o=r((function(){s(1)}));n({target:"Object",stat:!0,forced:o},{keys:function(t){return s(a(t))}})},b8fa:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("h1",{staticClass:"text-center"},[t._v("Контакт")]),n("div",{staticClass:"grid-2-3 card bg-light"},[n("div",{staticClass:"avatar"},[n("img",{attrs:{src:i("de37"),alt:"avatar"}}),n("h3",{staticClass:"text-primary text-center"},[t._v(t._s(t.contactInfo.name))])]),n("div",{staticClass:"info"},[t._l(t.contactInfo,(function(e,i,a){return n("div",{key:a,staticClass:"info-item",class:i},["id"!==i?n("ContactField",{key:t.upd,attrs:{contactInfo:t.contactInfo,updateStorage:t.updateStorage,keyName:i,list:e,editState:t.editState},on:{loadChanges:t.loadChanges}}):t._e()],1)})),n("form",{staticClass:"new-fields-form",class:{"show-form":this.showForm},on:{submit:function(e){return e.preventDefault(),t.edit(e)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.editContact.newName,expression:"editContact.newName"}],attrs:{type:"text",name:"newName",placeholder:"type",required:""},domProps:{value:t.editContact.newName},on:{input:function(e){e.target.composing||t.$set(t.editContact,"newName",e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.editContact.newValue,expression:"editContact.newValue"}],attrs:{type:"text",name:"newValue",placeholder:"value",required:""},domProps:{value:t.editContact.newValue},on:{input:function(e){e.target.composing||t.$set(t.editContact,"newValue",e.target.value)}}}),n("input",{staticClass:"btn btn-success btn-sm",attrs:{type:"submit",value:"Submit"}})]),n("button",{staticClass:"btn btn-success btn-sm hide my-1",class:{"edit-form":this.editState,"btn-danger":this.showForm},on:{click:t.showFields}},[t._v(t._s(this.showForm?"Cancel":"Add New Field"))]),n("button",{staticClass:"btn btn-dark btn-sm",class:{"btn-danger":this.editState,hide:this.showForm},on:{click:t.changeState}},[t._v(t._s(this.editState?"Cancel":"Edit"))]),n("router-link",{staticClass:"btn btn-dark btn-sm",class:{hide:this.editState},attrs:{to:"/"}},[t._v("Back To Contacts")]),n("button",{staticClass:"btn btn-danger btn-sm",class:{hide:!this.hasChanged},on:{click:t.cancelChange}},[t._v("1 step back")])],2)])])},a=[];i("99af"),i("4de4"),i("7db0"),i("4160"),i("c975"),i("4fad"),i("159b");function s(t){if(Array.isArray(t))return t}i("a4d3"),i("e01a"),i("d28b"),i("d3b7"),i("3ca3"),i("ddb0");function r(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var i=[],n=!0,a=!1,s=void 0;try{for(var r,o=t[Symbol.iterator]();!(n=(r=o.next()).done);n=!0)if(i.push(r.value),e&&i.length===e)break}catch(c){a=!0,s=c}finally{try{n||null==o["return"]||o["return"]()}finally{if(a)throw s}}return i}}var o=i("06c5");function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(t,e){return s(t)||r(t,e)||Object(o["a"])(t,e)||c()}var l=i("2909");function u(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}i("e439"),i("dbb4"),i("b64b");function h(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function f(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?h(Object(i),!0).forEach((function(e){u(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var b=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"form-group"},[i("label",[i("b",[t._v(t._s(t.keyName))]),t._v(":")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.fieldValue,expression:"fieldValue"}],staticClass:"input",class:{disabled:!this.editedField},attrs:{type:"text",disabled:""},domProps:{value:t.fieldValue},on:{input:function(e){e.target.composing||(t.fieldValue=e.target.value)}}}),i("i",{staticClass:"fas fa-minus-circle text-danger",class:{edit:this.editedField},on:{click:t.editField}}),i("i",{staticClass:"fas fa-pencil-alt",class:{edit:this.editState,hide:this.editedField},on:{click:t.editField}}),i("button",{staticClass:"btn btn-success btn-sm",class:{edit:this.editedField},on:{click:t.edit}},[t._v("submit")]),i("i",{staticClass:"fas fa-trash-alt text-danger",class:{edit:this.editState,hide:this.editedField},on:{click:t.deleteField}})])])},m=[],p={name:"ContactField",props:["keyName","list","contactInfo","updateStorage","editState"],data:function(){return{fieldValue:"",editedField:!1,changed:!1,isDeleted:!1,isEdited:!1,changesArr:[]}},methods:{edit:function(t){this.changed=!0,this.isEdited=!0,this.contactInfo[this.keyName]=this.fieldValue,this.editedField=!this.editedField,this.addChange(),this.updateStorage(this.contactInfo),t.target.previousElementSibling.previousElementSibling.disabled=!t.target.previousElementSibling.previousElementSibling.disabled},editField:function(){this.changed=!0,this.editedField=!this.editedField,this.editedField||confirm()?document.querySelector(".input").disabled=!document.querySelector(".input").disabled:this.editedField=!this.editedField},deleteField:function(t){confirm()&&(this.isDeleted=!0,this.changed=!0,this.addChange(),t.target.parentElement.remove(),delete this.contactInfo[this.keyName],this.updateStorage(this.contactInfo))},addChange:function(){var t={};t[this.keyName]=this.fieldValue,this.changesArr.push(t),this.$emit("loadChanges",this.changesArr,this.changed,this.isEdited,this.isDeleted)}},created:function(){this.fieldValue=this.list}},g=p,v=(i("9099"),i("2877")),C=Object(v["a"])(g,b,m,!1,null,"1070fc82",null),w=C.exports,y={name:"Contact",components:{ContactField:w},data:function(){return{contactInfo:"",editContact:{newName:"",newValue:""},editState:!1,showForm:!1,editedField:!1,editValue:"",hasChanged:!1,initValues:"",deleted:!1,edited:!1,changes:[],upd:0}},methods:{changeState:function(){this.editState=!this.editState,this.initValues=f({},this.contactInfo),this.hasChanged=!1},edit:function(){var t=this.editContact,e=t.newName,i=t.newValue;this.contactInfo=f(f({},this.contactInfo),{},u({},e,i)),this.changes.push(u({},e,i)),this.updateStorage(this.contactInfo),this.editContact.newName="",this.editContact.newValue="",this.showForm=!1,this.editState=!1;var n=document.querySelector(".new-fields-form");n.classList.remove("edit-form")},updateStorage:function(t){var e=this,i=JSON.parse(localStorage.getItem("contacts")),n=i.filter((function(t){return t.id===e.$route.params.id}))[0],a=i.indexOf(n);i[a]=t,localStorage.setItem("contacts",JSON.stringify(i)),this.forseRender()},loadChanges:function(t,e,i,n){var a=this;this.hasChanged=e,this.deleted=n,this.edited=i,t.forEach((function(t){return a.changes=[].concat(Object(l["a"])(a.changes),[t])}))},forseRender:function(){this.upd+=1},cancelChange:function(){if(this.deleted){for(var t=this.changes[this.changes.length-1],e=0,i=Object.entries(t);e<i.length;e++){var n=d(i[e],2),a=n[0],s=n[1];this.contactInfo[a]=s}this.contactInfo=f({},this.contactInfo),this.updateStorage(this.contactInfo),this.forseRender()}else if(this.edited){for(var r=0,o=Object.entries(this.initValues);r<o.length;r++){var c=d(o[r],2),l=c[0],u=c[1];this.contactInfo[l]=u}this.contactInfo=f({},this.contactInfo),this.updateStorage(this.contactInfo),this.forseRender()}this.hasChanged=!this.hasChanged},showFields:function(){this.showForm=!this.showForm,this.editContact.newName="",this.editContact.newValue=""}},created:function(){var t=this,e=JSON.parse(localStorage.getItem("contacts")),i=e.find((function(e){return e.id===t.$route.params.id}));this.contactInfo=i}},S=y,O=(i("7d18"),Object(v["a"])(S,n,a,!1,null,"4bd2ada8",null));e["default"]=O.exports},c975:function(t,e,i){"use strict";var n=i("23e7"),a=i("4d64").indexOf,s=i("a640"),r=i("ae40"),o=[].indexOf,c=!!o&&1/[1].indexOf(1,-0)<0,d=s("indexOf"),l=r("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:c||!d||!l},{indexOf:function(t){return c?o.apply(this,arguments)||0:a(this,t,arguments.length>1?arguments[1]:void 0)}})},dbb4:function(t,e,i){var n=i("23e7"),a=i("83ab"),s=i("56ef"),r=i("fc6a"),o=i("06cf"),c=i("8418");n({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(t){var e,i,n=r(t),a=o.f,d=s(n),l={},u=0;while(d.length>u)i=a(n,e=d[u++]),void 0!==i&&c(l,e,i);return l}})},de37:function(t,e,i){t.exports=i.p+"img/user.fcea9182.jpg"},e439:function(t,e,i){var n=i("23e7"),a=i("d039"),s=i("fc6a"),r=i("06cf").f,o=i("83ab"),c=a((function(){r(1)})),d=!o||c;n({target:"Object",stat:!0,forced:d,sham:!o},{getOwnPropertyDescriptor:function(t,e){return r(s(t),e)}})}}]);
//# sourceMappingURL=contact.de02799b.js.map